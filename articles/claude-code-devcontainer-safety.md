---
title: "そもそもホストOSで動かさない！DevContainer上でClaude Code！"
emoji: "🛡️"
type: "idea"
topics: ["claude", "devcontainer", "docker", "security", "ai"]
published: true
---

## はじめに

Claude Code（やその他のAIエージェント）をローカル環境で使う際、
最近頻繁に話題に上がる、**`rm -rf ~/` のようなコマンドを提案・実行されるリスク**。
確かにこれは怖い話ではありますが、**冷静に対応すれば十分に防げる問題**でもあります。

この記事では、その一つのシンプルで効果的な解決策として**DevContainer上で実行する**というお話をします。

## どのような問題があるのか？

`Claude Code`や他のAI開発アシスタントは、自然言語のプロンプトに基づき、文章やコマンド、プログラムなどを生成します。
場合によっては、生成したものを直接実行したり、実行を補助したりします。その結果、
`rm -rf /` のようなコマンドが生成されてしまうなど、**ホスト環境に致命的な影響を与える操作**が発生する可能性が出てきます。

https://x.com/mugisus/status/1940127947962396815

実際、上記のようなとんでもないコマンド実行が行われてしまった例もあります。

## 解決策：DevContainerで実行環境を隔離

それの解決策として、**DevContainer**（GitHub Codespacesでも良い）
のような、仮想環境上でのみの実行を提案します。
つまり、こういうことです。

* **AIが動く環境**を **ホストマシンから隔離された仮想的なコンテナ**内に閉じ込める
* `~` はコンテナ内のHOMEなので、ホストには影響なし
* 最悪壊れても、ホストOSじゃないので致命的な影響はないし、もう一回動かしたければ再ビルドすればいい

## まとめ

Claude CodeのようなAIツールは今後ますます、要求を達成するための
レスポンスの精度などが高度になっていきますが、それに比例して、
AIがユーザの想定を超えた操作をする可能性も高まっていきます。
**AIの力を最大限に活用しながら、環境はしっかりと守る**。
そのための第一歩として「DevContainerで実行する」は、**すぐにでも導入できる手段**です。
ぜひお試しください！

ちなみに、この記事もコンテナ上で、おおまかな内容は
`Claude Code`に書いてもらいました。
私がしたのは、多少の修正と最終的な調整だけなので、
適切に使えば、AIは便利であることは間違いないとも言えますね！