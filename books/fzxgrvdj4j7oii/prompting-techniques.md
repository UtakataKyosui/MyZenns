---
title: "聞き方ひとつで変わる！プロンプトのコツ"
---

# 聞き方ひとつで変わる！プロンプトのコツ

Claude Codeの性能を100%引き出すには、「聞き方」がめっちゃ重要なんです。同じ依頼でも、伝え方次第で結果が全然違ってきます。

## プロンプティングの基本原則

### 1. 具体的に書く

❌ **悪い例**:
```
認証機能を作って
```

✅ **良い例**:
```
BetterAuthを使ってGoogle OAuth認証機能を実装してください。

要件:
- ログイン/ログアウト機能
- セッション管理
- 未認証時のリダイレクト
- ユーザー情報の表示

ファイル構成:
- src/lib/auth.ts: BetterAuth設定
- src/app/api/auth/[...auth]/route.ts: APIルート
- src/components/AuthButton.tsx: ログインボタン
- src/middleware.ts: 認証チェック
```

### 2. 背景情報を含める

Claude Codeにプロジェクトの文脈を理解してもらうために、背景情報も伝えましょう。

```
【背景】
T3Stack（Next.js + tRPC + Drizzle + BetterAuth）のブログアプリを開発中です。
現在、基本的なCRUD機能は実装済みで、次に認証機能を追加したいと思っています。

【依頼】
...
```

### 3. 期待する出力を明示する

```
【期待する結果】
- ログインボタンをクリックするとGoogleの認証画面に遷移
- 認証成功後、ユーザー名とアバターが表示される
- 未認証時は投稿作成ページにアクセスできない
- TypeScript型エラーが出ない状態
```

## T3Stack開発での実践的プロンプト例

### ケース1: Drizzleスキーマの作成

❌ **悪い例**:
```
ユーザーテーブルを作って
```

✅ **良い例**:
```
Drizzleを使ってusersテーブルのスキーマを作成してください。

【テーブル仕様】
- id: プライマリキー（UUID）
- name: 文字列、必須
- email: 文字列、必須、ユニーク
- image: 文字列、オプショナル（アバター画像URL）
- createdAt: タイムスタンプ、デフォルトは現在時刻
- updatedAt: タイムスタンプ、自動更新

【ファイル】
src/server/db/schema.ts に追加

【その他】
- BetterAuthとの連携を考慮
- 既存のpostテーブルとのリレーション（authorId）も定義
```

### ケース2: tRPCルーターの作成

✅ **良い例**:
```
postsのCRUD操作用のtRPCルーターを作成してください。

【API仕様】
- getAll: 全投稿取得（ページネーション付き）
- getById: ID指定で投稿取得
- create: 新規投稿作成（認証必須）
- update: 投稿更新（作成者のみ）
- delete: 投稿削除（作成者のみ）

【ファイル】
src/server/api/routers/posts.ts

【バリデーション】
- Zodスキーマでの入力検証
- titleは1-100文字
- contentは1-10000文字

【認証】
- 作成・更新・削除は認証必須
- BetterAuthのセッション情報を使用
```

### ケース3: フロントエンド実装

✅ **良い例**:
```
投稿一覧ページを作成してください。

【仕様】
- URL: /posts
- tRPCのposts.getAllを使用
- 投稿をカード形式で表示
- 各カードに: タイトル、内容（抜粋）、作成者、作成日
- ページネーション機能
- ローディング状態の表示

【ファイル】
src/app/posts/page.tsx

【デザイン】
- Tailwind CSSを使用
- レスポンシブ対応
- 既存のスタイルに合わせる

【その他】
- TypeScript型安全性を保つ
- Next.js App Routerのベストプラクティスに従う
```

## プロンプト改善のコツ

### 1. 段階的な指示

複雑な機能は一度に全部頼まず、段階的に進めます。

```
【フェーズ1】
まず、Drizzleスキーマでusersテーブルを作成してください。

完了したら【フェーズ2】に進みます。

【フェーズ2】
BetterAuthの設定を追加してください。

【フェーズ3】
認証ミドルウェアを実装してください。
```

### 2. エラー対応の指示

```
【エラー時の対応】
型エラーが出た場合は、以下を確認して修正してください：
1. tRPCの型定義が正しいか
2. Drizzleのスキーマとの整合性
3. BetterAuthの型定義

ビルドエラーが出た場合は、依存関係とインポート文をチェックしてください。
```

### 3. 制約事項の明示

```
【制約事項】
- 既存のコードは変更しない
- データベースの既存データに影響しない
- package.jsonに新しい依存関係は追加しない
- TypeScript strict modeでエラーが出ない
```

## よくある失敗パターンと改善法

### 失敗パターン1: 曖昧すぎる指示

❌ **悪い例**:
```
いい感じにやっといて
```

✅ **改善例**:
```
T3Stackのベストプラクティスに従って、以下の仕様で実装してください：
[具体的な仕様]
```

### 失敗パターン2: 情報不足

❌ **悪い例**:
```
エラーが出ました、修正してください
```

✅ **改善例**:
```
以下のエラーが発生しました：
[エラーメッセージ]

実行したコマンド：npm run dev
期待する動作：開発サーバーが正常に起動
現在の状況：コンパイルエラーで起動しない

関連ファイル：
- src/server/api/routers/posts.ts（直前に修正）
- src/server/db/schema.ts
```

### 失敗パターン3: 文脈の欠如

❌ **悪い例**:
```
この関数を修正して
```

✅ **改善例**:
```
【背景】
T3StackのtRPCルーターで投稿取得機能を実装中です。

【問題】
posts.getAll プロシージャで作成者情報も一緒に取得したいのですが、
現在はpostのデータのみ取得している状態です。

【希望】
Drizzleのwith()を使って、userテーブルとJOINして
作成者の名前とアバター画像も含めて返すように修正してください。

【該当コード】
[現在のコード]
```

## 高度なプロンプティングテクニック

### 1. ペルソナの設定

```
あなたはT3Stack + Drizzle + BetterAuthの専門家として、
以下の依頼に答えてください。

モダンなフルスタック開発のベストプラクティスを踏まえ、
保守しやすく、型安全なコードを重視してください。
```

### 2. 思考過程の要求

```
実装前に、以下の点を検討して教えてください：
1. どのような設計思想で実装するか
2. 考えられる課題とその対策
3. 代替案があれば、その比較

その後、実装に取り掛かってください。
```

### 3. レビューの依頼

```
実装が完了したら、以下の観点でコードレビューもお願いします：
- 型安全性
- パフォーマンス
- セキュリティ
- 保守性
- T3Stackのベストプラクティス準拠
```

## まとめ

良いプロンプトの特徴：
- **具体的**: 曖昧さがない
- **文脈的**: 背景情報が含まれる
- **構造的**: 整理されて読みやすい
- **完全**: 必要な情報が漏れていない

練習あるのみです！最初は長めのプロンプトになっても構いません。慣れてきたら、効率的に要点をまとめられるようになります。

次の章では、プロジェクト設定の最適化について学んでいきましょう。